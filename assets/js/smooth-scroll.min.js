(function(a,b){if(typeof define==="function"&&define.amd){define([],function(){return b(a)})}else{if(typeof exports==="object"){module.exports=b(a)}else{a.SmoothScroll=b(a)}}})(typeof global!=="undefined"?global:typeof window!=="undefined"?window:this,function(j){var g={ignore:"[data-scroll-ignore]",header:null,topOnEmptyHash:true,speed:500,speedAsDuration:false,durationMax:null,durationMin:null,clip:true,offset:0,easing:"easeInOutCubic",customEasing:null,updateURL:true,popstate:true,emitEvents:true};var q=function(){return("querySelector" in document&&"addEventListener" in j&&"requestAnimationFrame" in j&&"closest" in j.Element.prototype)};var l=function(){var r={};Array.prototype.forEach.call(arguments,function(t){for(var s in t){if(!t.hasOwnProperty(s)){return}r[s]=t[s]}});return r};var d=function(r){if("matchMedia" in j&&j.matchMedia("(prefers-reduced-motion)").matches){return true}return false};var h=function(r){return parseInt(j.getComputedStyle(r).height,10)};var a=function(x){if(x.charAt(0)==="#"){x=x.substr(1)}var u=String(x);var w=u.length;var t=-1;var v;var r="";var s=u.charCodeAt(0);while(++t<w){v=u.charCodeAt(t);if(v===0){throw new InvalidCharacterError("Invalid character: the input contains U+0000.")}if((v>=1&&v<=31)||v==127||(t===0&&v>=48&&v<=57)||(t===1&&v>=48&&v<=57&&s===45)){r+="\\"+v.toString(16)+" ";continue}if(v>=128||v===45||v===95||v>=48&&v<=57||v>=65&&v<=90||v>=97&&v<=122){r+=u.charAt(t);continue}r+="\\"+u.charAt(t)}return"#"+r};var p=function(r,t){var s;if(r.easing==="easeInQuad"){s=t*t}if(r.easing==="easeOutQuad"){s=t*(2-t)}if(r.easing==="easeInOutQuad"){s=t<0.5?2*t*t:-1+(4-2*t)*t}if(r.easing==="easeInCubic"){s=t*t*t}if(r.easing==="easeOutCubic"){s=(--t)*t*t+1}if(r.easing==="easeInOutCubic"){s=t<0.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1}if(r.easing==="easeInQuart"){s=t*t*t*t}if(r.easing==="easeOutQuart"){s=1-(--t)*t*t*t}if(r.easing==="easeInOutQuart"){s=t<0.5?8*t*t*t*t:1-8*(--t)*t*t*t}if(r.easing==="easeInQuint"){s=t*t*t*t*t}if(r.easing==="easeOutQuint"){s=1+(--t)*t*t*t*t}if(r.easing==="easeInOutQuint"){s=t<0.5?16*t*t*t*t*t:1+16*(--t)*t*t*t*t}if(!!r.customEasing){s=r.customEasing(t)}return s||t};var m=function(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)};var k=function(t,s,v,u){var r=0;if(t.offsetParent){do{r+=t.offsetTop;t=t.offsetParent}while(t)}r=Math.max(r-s-v,0);if(u){r=Math.min(r,m()-j.innerHeight)}return r};var c=function(r){return !r?0:(h(r)+r.offsetTop)};var o=function(t,r){var s=r.speedAsDuration?r.speed:Math.abs(t/1000*r.speed);if(r.durationMax&&s>r.durationMax){return r.durationMax}if(r.durationMin&&s<r.durationMin){return r.durationMin}return parseInt(s,10)};var e=function(r){if(!history.replaceState||!r.updateURL||history.state){return}var s=j.location.hash;s=s?s:"";history.replaceState({smoothScroll:JSON.stringify(r),anchor:s?s:j.pageYOffset},document.title,s?s:j.location.href)};var n=function(s,t,r){if(t){return}if(!history.pushState||!r.updateURL){return}history.pushState({smoothScroll:JSON.stringify(r),anchor:s.id},document.title,s===document.documentElement?"#top":"#"+s.id)};var f=function(r,t,s){if(r===0){document.body.focus()}if(s){return}r.focus();if(document.activeElement!==r){r.setAttribute("tabindex","-1");r.focus();r.style.outline="none"}j.scrollTo(0,t)};var i=function(u,t,s,r){if(!t.emitEvents||typeof j.CustomEvent!=="function"){return}var v=new CustomEvent(u,{bubbles:true,detail:{anchor:s,toggle:r}});document.dispatchEvent(v)};var b=function(u,C){var x={};var t,v,y,s,r,z;x.cancelScroll=function(D){cancelAnimationFrame(z);z=null;if(D){return}i("scrollCancel",t)};x.animateScroll=function(I,O,F){x.cancelScroll();var D=l(t||g,F||{});var N=Object.prototype.toString.call(I)==="[object Number]"?true:false;var R=N||!I.tagName?null:I;if(!N&&!R){return}var L=j.pageYOffset;if(D.header&&!s){s=document.querySelector(D.header)}var P=c(s);var E=N?I:k(R,P,parseInt((typeof D.offset==="function"?D.offset(I,O):D.offset),10),D.clip);var G=E-L;var J=m();var S=0;var Q=o(G,D);var H,K,U;var T=function(V,X){var W=j.pageYOffset;if(V==X||W==X||((L<X&&j.innerHeight+W)>=J)){x.cancelScroll(true);f(I,X,N);i("scrollStop",D,I,O);H=null;z=null;return true}};var M=function(V){if(!H){H=V}S+=V-H;K=Q===0?0:(S/Q);K=(K>1)?1:K;U=L+(G*p(D,K));j.scrollTo(0,Math.floor(U));if(!T(U,E)){z=j.requestAnimationFrame(M);H=V}};if(j.pageYOffset===0){j.scrollTo(0,0)}n(I,N,D);i("scrollStart",D,I,O);x.cancelScroll(true);j.requestAnimationFrame(M)};var A=function(E){if(d(t)){return}if(E.defaultPrevented){return}if(E.button!==0||E.metaKey||E.ctrlKey||E.shiftKey){return}if(!("closest" in E.target)){return}y=E.target.closest(u);if(!y||y.tagName.toLowerCase()!=="a"||E.target.closest(t.ignore)){return}if(y.hostname!==j.location.hostname||y.pathname!==j.location.pathname||!/#/.test(y.href)){return}var F=a(y.hash);var D;if(F==="#"){if(!t.topOnEmptyHash){return}D=document.documentElement}else{D=document.querySelector(F)}D=!D&&F==="#top"?document.documentElement:D;if(!D){return}E.preventDefault();e(t);x.animateScroll(D,y)};var w=function(E){if(history.state===null){return}if(!history.state.smoothScroll||history.state.smoothScroll!==JSON.stringify(t)){return}var D=history.state.anchor;if(typeof D==="string"&&D){D=document.querySelector(a(history.state.anchor));if(!D){return}}x.animateScroll(D,null,{updateURL:false})};x.destroy=function(){if(!t){return}document.removeEventListener("click",A,false);j.removeEventListener("popstate",w,false);x.cancelScroll();t=null;v=null;y=null;s=null;r=null;z=null};var B=function(){if(!q()){throw"Smooth Scroll: This browser does not support the required JavaScript methods and browser APIs."}x.destroy();t=l(g,C||{});s=t.header?document.querySelector(t.header):null;document.addEventListener("click",A,false);if(t.updateURL&&t.popstate){j.addEventListener("popstate",w,false)}};B();return x};return b});